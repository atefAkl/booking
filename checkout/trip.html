<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="shortcut icon" href="/checkout/Document_files/mastercard_logo.png" type="image/x-icon">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="/css/style.css" rel="stylesheet">

  <link rel="stylesheet" href="./Document_files/style.css">
<meta name="robots" content="noindex,follow">
</head>
<body>
  
  <div class="container">
    <br>
    
    <div class="input-group ">
      <button onclick="window.location.href='/'" class="form-control m-3 text-center">العودة إلى الرحلات</button>
    </div>      
    <fieldset>
      <legend>مراجعة المدفوعات</legend>
      <h5 class="">التفاصيل</h5>
        <table>
          <tbody>
            <tr>
              <td>مقدم الخدمة</td>
              <td>TRIPVUM Company</td>
            </tr>
            <tr>
              <td>الرحلة إلى</td>
              <td id="tripTo"></td>
            </tr>
            <tr>
              <td>السعر</td>
              <td id="oldPrice"></td>
            </tr>
            <tr>
              <td>الخصم</td>
              <td id="discount"></td>
            </tr>
            <tr>
              <td>السعر بعد الخصم</td>
              <td id="price"></td>
            </tr>
            <tr>
              <td> عدد التذاكر</td>
              <td>
                <input type="number" name="tickets" id="tickets" value="1">
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <th> الاجمالى</th>
              <th id="total"> </th>
              </tr>
              <tr>
              <th>الضريبة</th>
              <th id="vat"> </th>
            </tr>
          </tfoot>
      </table>
    </fieldset>

    <fieldset class="mt-5">
      <legend>اختر وسيلة الدفع</legend>

      <button class="v-card p-5 text-center">
        <img src="/checkout/Document_files/visa_logo.png" alt="nothing" height="40px">
        <img src="/checkout/Document_files/mastercard_logo.png" alt="nothing" height="40px">
        <h6>الدفع عبر البطاقات الائتمانية</h6>
      </button>
      <button class="p-5 paypal text-center">
        <img src="/checkout/Document_files/paypal_logo.png" alt="nothing" height="40px">
        <h6>الدفع عبر PayPal</h6>
      </button>
      <button class="bitcoin p-5 text-center">
        <img src="/checkout/Document_files/th (1).jpeg" alt="nothing" height="40px">
        <img src="/checkout/Document_files/th.jpeg" alt="nothing" height="40px">
        <h6>الدفع بالعملات المشفرة</h6>
      </button>

      <div class="input-fields" id="method-card-form">
        <div class="row my-3">
          <div class="col col-6" style="height: 270px;">
            <div class="p-3 m-2 border">
              <div class="input-group my-2">
                <label class="input-group-text" for="cardNumber">رقم البطاقة:</label>
                <input type="text" id="cardNumber" placeholder="XXXX XXXX XXXX XXXX" class="form-control card-number" required>
              </div>
              <div class="input-group my-2">
                <label class="input-group-text"   for="cardholderName">اسم صاحب البطاقة:</label>
                <input type="text" id="cardholderName" placeholder="احمد عبد الحميد" class="cardholder-name form-control" required>
              </div>
              <div class="input-group my-2">
                <label class="input-group-text" for="expiryYear">انتهاء الصلاحية:</label>
                <input type="text" class="form-control" placeholder="MM/YY">
                <label class="input-group-text" for="cvv">CVV:</label>
                <input type="password" id="cvv" placeholder="123" class="form-control cvv" required>
              </div>
              <div class="input-group my-2">
                <span class="info">* CVV or CVC is the card security code, unique three digits number on the back of your card separate from its number.</span>
              </div>
              <div class="input-group my-2">
              <button class="form-control text-center" id="confirmPayment" type="submit">التأكيد والدفع</button>
              </div>
            </div>
          </div>
          <div class="col col-6" style="height: 240px;">
            <div class="p-3 m-2 border"></div>
          </div>
        </div>
    </fieldset>

  </div>
  <script
        src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script type="text/javascript">

    const tripsParams = new URLSearchParams(window.location.search);
    
    const tripPrice = tripsParams.get('price')
    const tripVat = tripsParams.get('taxInc')

    const tickets = tripsParams.get('tickets')
    $('#tickets').val(tickets)
    
    $('#tripTo').html(tripsParams.get('destination'));
    $('#oldPrice').html(tripsParams.get('oldPrice') + ' ج م');
    $('#discount').html(tripsParams.get('oldPrice')-tripsParams.get('price') + ' ج م');
    $('#price').html(tripsParams.get('price') + ' ج م')
    $('#price').attr('data-price', tripPrice)

    const netPrice = $('#price').attr('data-price')
    var totalPrice = netPrice * tickets
    $('#total').html(totalPrice);
    
    $('#tickets').change(function() {
      totalPrice = netPrice * $('#tickets').val()
      $('#total').html(totalPrice);
    })

    $('#vat').html(() => {return tripVat? 'السعر يشمل الضريبة' : tripVat});
    
    $('#confirmPayment').click(()=>{
      if ($('#cardNumber').val() == '' || $('#cardholderName').val() == '' || $('#expiryYear').val() == '' || $('#cvv').val() == '') {
        alert('من فضلك املأ الحقول المطلوبة')
      } else {
        if (confirm('سوف يتم خصم من رصيدك مبلغ :' + totalPrice)) {
          return true
        }
      }
    })
    
    window.onload=function(){
    const cardMethod = document.querySelector('button.v-card');  // استخدام مُحدد الفئة
    const cardMethodForm = document.querySelector('#method-card-form');

      cardMethod.onclick = function() {
      cardMethod.classList.toggle('blue-border');
      cardMethodForm.classList.toggle('show');
    };
  }


</script>

  <script src="/checkout/Document_files/jquery.min.js.download"></script>
  <script src="/checkout/Document_files/script.js.download"></script>
                                          
  </body>
</html>