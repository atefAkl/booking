<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="shortcut icon" href="/checkout/Document_files/mastercard_logo.png" type="image/x-icon">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/all.css">
    <link rel="stylesheet" href="./Document_files/style.css">
    <meta name="robots" content="noindex,follow">
    <script src="/js/hotels.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="/js/main.js"></script>
    <script>
      var bookedHotels = JSON.parse(localStorage.getItem('bookedHotels')) || []
      const hotelParams = new URLSearchParams(window.location.search);
      const hotelId = hotelParams.get('id')
      const serviceItemIndex = hotelParams.get('serviceIndex')-1
      const hotel = Hotels.find((hotel)=>hotel.id == hotelId);
      const serviceItem = hotel.prices[serviceItemIndex]

      const stars = hotel.stars
      
    </script>
  </head>
  <body>
  
    <div class="container">
      <br>
      
      <div class="d-flex gap-3" dir="rtl">
        
          <a  style="flex:1" onclick="goTo('/')" class="m-1 btn btn-outline-primary text-center">العودة إلى الرئيسية</a>
        
          <a  style="flex:1" onclick="goTo('/pages/hotel.html?id='+hotelParams.get('id'))" class="m-1 btn btn-outline-primary text-center">العودة إلى الفندق</a>
      </div>
        
      <fieldset class="pb-0 mb-0">
        <legend>مراجعة المدفوعات</legend>
        <h5 class="">التفاصيل</h5>
        <table id="hotel" class="table table-striped pb-0">
          <thead>
            <tr class="text-center">
              <th class="bg-primary text-light">بيان</th>
              <th class="bg-primary text-light w-50">قيمة/Value</th>
              <th class="bg-primary text-light">Item</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th class="text-start">مقدم الخدمة</th>
              <th class="text-center">TRIPVUM Company</th>
              <th>Service Provider</th>
            </tr>
            <tr>
              <th class="text-start">الإقامة فى: </th>
              <th class="text-center" id="hotelName"></th>
              <th>Residence In</th>

            </tr>
            <tr>
              <th class="text-start">الوصف</th>
              <td class="text-center" id="description"></td>
              <th>Description</th>
            </tr>
            <tr>
              <th class="text-start">مدة الإقامة </th>
              <td id="stay">
                <div class="row px-3 gap-2">
                  <div class="border col">
                    <button data-count="-1" data-target="#daysCount" class="px-2 changeDayCount"><i class="fa fa-minus"></i></button>
                    <span id="daysCount" data-min="1">1</span>
                    <button data-count="1" data-target="#daysCount" class="px-2 changeDayCount"><i class="fa fa-plus"></i></button>
                    <span>الأيام</span>
                  </div>
                  <div class="border col">
                    <span id="nightsCount" data-min="0">0</span>
                    <span>الليالى</span>
                  </div>
                </div>
              </td>
              <th>Stay</th>
            </tr>
            
            <tr>
              <th class="text-start">الوجبات</th>
              <td id="addons" >
                <div class="row">
                  <div class="col col-auto">
                    <div class="form-check form-check-reverse">
                      <input class="form-check-input" data-cost="10.5" type="checkbox" id="breakfast">
                      <label class="form-check-label" value="" for="breakfast">افطار <span class="text-primary fs-small"><script>document.write((10.5*stars).toFixed(2))</script> EGP </span></label>
                    </div>
                  </div>
                  <div class="col col-auto">
                    <div class="form-check form-check-reverse">
                      <input class="form-check-input" type="checkbox" id="lunch" data-cost="16">
                      <label class="form-check-label" value="" for="lunch">غداء <span class="text-primary fs-small"><script>document.write((16*stars).toFixed(2))</script> EGP </span></label>
                    </div>
                  </div>
                  <div class="col col-auto">
                    <div class="form-check form-check-reverse">
                      <input class="form-check-input" type="checkbox" id="dinner" data-cost="8.5">
                      <label class="form-check-label" value="" for="dinner">عشاء <span class="text-primary fs-small"><script>document.write((8.5*stars).toFixed(2))</script> EGP </span></label>
                    </div>
                  </div>
                </div>
              </td>
              <th>Meals</th>
            </tr>
            <tr>
              <th class="text-start">الإضافات</th>
              <td id="meals" >
                <div class="form-check form-check-inline form-check-reverse">
                  <input class="form-check-input" name="addons" type="radio" id="trans" data-cost="50">
                  <label class="form-check-label" for="trans">انتقالات <span class="text-primary fs-small"><script>document.write((50*stars/1.5).toFixed(2))</script> EGP / يوم</span></label>
                </div>
                <div class="form-check form-check-inline form-check-reverse">
                  <label class="form-check-label" for="car">سيارة خاصة  <span class="text-primary fs-small"><script>document.write((60*stars/1.5).toFixed(2))</script> EGP / يوم</span></label>
                  <input class="form-check-input" name="addons" type="radio" id="car" data-cost="60">
                </div>
              </td>
              <th>Addons</th>
            </tr>
            <tr>
              <th class="text-start"> عدد الغرف</th>
              <td>
                <div class="row px-3 gap-2">
                  <div class="border col">
                    <button data-count="-1" data-target="#roomsCount" class="px-2 changeRoomsCount"><i class="fa fa-minus"></i></button>
                    <span id="roomsCount" data-min="1">1</span>
                    <button data-count="1" data-target="#roomsCount" class="px-2 changeRoomsCount"><i class="fa fa-plus"></i></button>
                    <span>غرقة / جناح</span>
                  </div>
                  
                </div>
              </td>
              <th>Rooms Number</th>
            </tr>
            <tr>
              <th class="text-start">النزلاء</th>
              <td id="paasengers" >
                <div class="row px-3 gap-2">
                  <div class="border col">
                    <div class="d-block text-center">
                      <button data-count="-1" data-target="#youngCount" class="px-2 changeYoungsCount"><i class="fa fa-minus"></i></button>
                      <span id="youngCount" data-min="0">0</span>
                      <button data-count="1" data-target="#youngCount" class="px-2 changeYoungsCount"><i class="fa fa-plus"></i></button>
                    </div>
                    <span class="d-block text-center">أقل من 6 سنوات</span>
                  </div>
                  <div class="border col">
                    <div class="d-block text-center">
                      <button data-count="-1" data-target="#childrenCount" class="px-2 changeChildrenCount"><i class="fa fa-minus"></i></button>
                      <span id="childrenCount" data-min="0">0</span>
                      <button data-count="1" data-target="#childrenCount" class="px-2 changeChildrenCount"><i class="fa fa-plus"></i></button>
                    </div>
                    <span class="d-block text-center">من 6 الى 12 سنة</span>
                  </div>
                  <div class="border col">
                    <div class="d-block text-center">
                      <button data-count="-1" data-target="#adultCount" class="px-2 changeAdultCount"><i class="fa fa-minus"></i></button>
                      <span id="adultCount" data-min="1">1</span>
                      <button data-count="1" data-target="#adultCount" class="px-2 changeAdultCount"><i class="fa fa-plus"></i></button>
                    </div>
                    <span class="d-block text-center">البالغين</span>
                  </div>
                </div>
              </td>
              <th>Passengers</th>
            </tr>
          </tbody>
        </table>
      </fieldset>
      <fieldset>
        <legend>المسئول عن الحجز </legend>
        <div class="input-group mb-2" id="representative">
          <label for="name" class="input-group-text">اسم المسئول </label>
          <input type="text" class="form-control" id="name">
          <label for="email" class="input-group-text">البريد الالكترونى</label>
          <input type="text" class="form-control" id="email">
        </div>
        <div class="input-group mb-3">
          <label for="natId" class="input-group-text">الرقم القومى</label>
          <input type="text" class="form-control" id="natId">
          <label for="phone" class="input-group-text">الهاتف</label>
          <input type="text" class="form-control" id="phone">
        </div>
        
      </fieldset>
      <fieldset>
        <legend>تسجيل النزلاء</legend>
        <label for="addPassengersLater">تسجيل النزلاء عند الوصول</label>
        <input type="checkbox" id="addPassengersLater">
        <div id="companyForms">
          <h6>البالغين:</h6>
          <div id="adultsForm"></div>
          <h6>الأطفال أقل من 6 سنوات:</h6>
          <div id="youngsForm"></div>
          <h6>الأطفال من 6:12 سنة:</h6>
          <div id="childrenForm"></div>
        </div>
      </fieldset>
     
      <fieldset>
        <legend>ملخص الحجز</legend>
        <table>
          <tr>
            <th class="bg-primary text-light text-start"> طلبات إضافية</th>
            <th class="bg-primary text-light row" > 
              <div class="col col-3">الإقامة</div>
              <div class="col col-4" id="total-stay"></div>
              <div class="col col-1">EGP</div>
              <div class="col col-3">Vacation</div>
              <div class="col col-3">الوجبات</div>
              <div class="col col-4" id="total-meals"></div>
              <div class="col col-1">EGP</div>
              <div class="col col-3">Meals</div>
              <div class="col col-3">الإضافات</div>
              <div class="col col-4" id="total-addons"></div>
              <div class="col col-1">EGP</div>
              <div class="col col-3">Addons</div>
              <div class="col col-3">الاجمالى</div>
              <div class="col col-4" id="total"></div>
              <div class="col col-1">EGP</div>
              <div class="col col-3">Total</div>
            </th>
            <th class="bg-primary text-light "> Additional Orders</th>
          </tr>
          <tr>
            <th class="text-start"> الخصومات والعروض </th>
            <td id="discount">
              
            </td>
            <th>Discount / Offers</th>
          </tr>
          <tr>
            <th class="bg-primary text-light text-start"> الاجمالى بعد الخصم</th>
            <th class="bg-primary text-light " id="totalAfterDiscount"> </th>
            <th class="bg-primary text-light "> Total After Discount</th>
          </tr>
          
          <tfoot>
            <caption>
              <p class="text-success text-center">السعر يشمل ضريبة المبيعات VAT Included.</p>
            </caption>
          </tfoot>
        </table>
      </fieldset>

      <fieldset class="mt-5">
        <legend>اختر وسيلة الدفع</legend>

        <button class="v-card p-5 text-center">
          <img src="/checkout/Document_files/visa_logo.png" alt="nothing" height="40px">
          <img src="/checkout/Document_files/mastercard_logo.png" alt="nothing" height="40px">
          <h6>الدفع عبر البطاقات الائتمانية</h6>
        </button>
        <button class="p-5 paypal text-center">
          <img src="/checkout/Document_files/paypal_logo.png" alt="nothing" height="40px">
          <h6 class="text-center">الدفع عبر PayPal</h6>
        </button>
        <button class="bitcoin p-5 text-center">
          <img src="/checkout/Document_files/th (1).jpeg" alt="nothing" height="40px">
          <img src="/checkout/Document_files/th.jpeg" alt="nothing" height="40px">
          <h6>الدفع بالعملات المشفرة</h6>
        </button>

        <div class="input-fields show" id="method-card-form">
          <div class="row my-3">
            <div class="col col-6" style="height: 270px;">
              <div class="p-3 m-2">
                <div class="input-group my-2">
                  <label class="input-group-text" for="cardNumber">رقم البطاقة:</label>
                  <input type="text" maxlength="16" minlength="16" id="cardNumber" placeholder="XXXX XXXX XXXX XXXX" class="form-control card-number" value="" required>
                </div>
                <div class="input-group my-2">
                  <label class="input-group-text" for="cardholderName">اسم صاحب البطاقة:</label>
                  <input type="text" id="cardholderName" value="" placeholder="احمد عبد الحميد" class="cardholder-name form-control" required>
                </div>
                <div class="input-group my-2">
                  <label class="input-group-text" for="expiryYear">انتهاء الصلاحية:</label>
                  <input type="text" class="form-control" maxlength="5" id="expiryYear" placeholder="MM/YY">
                  <label class="input-group-text" for="cvv">CVV:</label>
                  <input type="text" id="cvv" maxlength="3" placeholder="123" class="form-control cvv" required>
                </div>
                <div class="input-group my-2">
                  <span class="info">* CVV or CVC is the card security code, unique three digits number on the back of your card separate from its number.</span>
                </div>
                <div class="input-group my-2">
                <button class="form-control text-center" id="confirmPayment" type="submit">التأكيد والدفع</button>
                </div>
              </div>
            </div>
            <div class="col col-6" style="height: 270px;">
              <div class="p-1 m-2">
                <!-- the card view -->
                <div id="card-display" class="">
                  <div class="visacard-front">
                    <div class="the-card">
                      <div class="top-section">
                        <img src="./Document_files/visa_logo.png" alt="">
                      </div>
                      <div class="mid-section">
                        <img src="./Document_files/chip.png" alt="" height="40">
                        <i class="fas fa-wifi" style="font-size: 24px; line-height: 36px; color: #006eff"></i>
                        <i class="fab fa-cc-visa" style="font-size: 24px; line-height: 36px; color: #006eff"></i>
                        <i class="far fa-eye-slash" style="font-size: 24px; line-height: 36px; color: #006eff"></i>
                      </div>
                      <div class="card-number-section">
                        <div class="part">
                          <span id="d1">X</span>
                          <span id="d2">X</span>
                          <span id="d3">X</span>
                          <span id="d4">X</span>
                        </div>_
                        <div class="part">
                          <span id="d5">X</span>
                          <span id="d6">X</span>
                          <span id="d7">X</span>
                          <span id="d8">X</span>
                        </div>_
                        <div class="part">
                          <span id="d9">X</span>
                          <span id="d10">X</span>
                          <span id="d11">X</span>
                          <span id="d12">X</span>
                        </div>_
                        <div class="part">
                          <span id="d13">X</span>
                          <span id="d14">X</span>
                          <span id="d15">X</span>
                          <span id="d16">X</span>
                        </div>
                      </div>
                    </div>
                    <div class="expiry">
                        <div>Expires End Of</div>
                        <div>MM/YY</div>
                        <div id="expiry-date">00/00</div>
                    </div>
                    <div id="card-holder">Jonny Deep</div>
                  </div>
                  <div class="visacard-back">
                    <div class="the-card">

                      <div class="hash" style="height: 40px; background-image: linear-gradient(to bottom, #000, #333, #000); width: 400px; margin-right:-1rem"></div>
                      <div class="card-signature" style="display: block;">
                        <div class="row w-75" style="margin-right: 25%">
                          <div class="col col-6" style="font-size: 0.5rem; height: 24px; line-height: 24px;">التوقيع المعتمد</div>
                          <div class="col col-6" style="font-size: 0.5rem; height: 24px; line-height: 24px;">AUTHORIZED SIGNATURE</div>
                          <div class="col col-2" id="card-cvv" style="line-height: 40px;">***</div>
                          <div class="col col-10 blind-area"></div>
                        </div>
                      </div>
                      <div class="text" style="display: block; padding: 1rem">
                        <p style="font-size: 0.6rem; margin: 0">لا يجوز استخدام هذه البطاقة إلا من قبل موقّع مخوّل يخضع للبنود والشروط الحالية للاستخدام.</p>
                        <p style="font-size: 0.6rem; margin: 0">
                          this card may only be used by authorized signatory
                      and subject to the current terms and condition of use
                        </p>
                      </div>
                      <img src="./Document_files/visa_logo.png" alt="" height="24">
                      <img src="./Document_files/mastercard_logo.png" alt="" height="24">
                    </div>

                  </div>
                </div>
                
                <!-- the card view -->
              </div>
            </div>
          </div>
        </div>

      </fieldset>
      <div id="authenticating">
        <img src="/checkout/Document_files/TwicoGreenSpin.gif" alt="">
      </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script src="./Document_files/hotelBooking.js"></script>
    <script src="./Document_files/card.js"></script>
    <script type="text/javascript">
      var rendered_stars = ''
      for (let i =0; i<hotel.stars;i++) {
        rendered_stars+= `<i class="fa fa-star" style="color: #B87333"></i>`
      }

      
      $('#cardNumber').on('keypress', (e)=> {
        if (isNaN(e.key)) return false
      })
      
      $('#expiryYear').on('keypress', (e)=> {
        const allowedChars = /[0-9\/]/;
        if (!allowedChars.test(e.key)) return false
      })
      
      $('#cvv').on('keypress', (e)=> {
        if (isNaN(e.key)) return false
      })

      $('#hotelName').html(hotel.name + ' &nbsp; ' + rendered_stars)
      $('#description').html(serviceItem.name)
      
      // تعيين الخصومات والعروض
      if (serviceItem.offer) {
        $('#discount').html(serviceItem.offer.brief)
      } else {
        $('#discount').html('لا يوجد عروض أو خصم على هذه الخدمة')
      }


        
      window.onload=function(){
        $('button.v-card').on('click', function() {
          $('button.v-card').css({
            border: '1px solid #338'
          });
          $('#method-card-form').slideToggle(600);
        });
      }



    </script>
  </body>
</html>